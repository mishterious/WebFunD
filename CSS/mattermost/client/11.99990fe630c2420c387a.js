webpackJsonp([11],{2548:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(44),l=r(n),o=a(239),u=r(o),s=a(238),d=r(s),i=a(242),c=r(i),f=a(240),m=r(f),p=a(241),h=r(p),g=a(21),v=r(g),E=a(13),y=r(E),M=a(697),b=a(244),_=a(715),k=a(791),N=r(k),w=a(792),S=r(w),P=a(2549),C=r(P),A=a(2550),F=r(A),L=function(e){function t(){var e,a,r,n;(0,d.default)(this,t);for(var l=arguments.length,o=Array(l),s=0;s<l;s++)o[s]=arguments[s];return a=r=(0,m.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(o))),r.handleOnClick=function(e){e.preventDefault(),(0,_.emitUserLoggedOutEvent)("/login")},n=a,(0,m.default)(r,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){document.body.classList.add("sticky"),document.getElementById("root").classList.add("container-fluid"),"true"===window.mm_license.MFA&&"true"===window.mm_config.EnableMultifactorAuthentication||this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("sticky"),document.getElementById("root").classList.remove("container-fluid")}},{key:"render",value:function(){var e=this,t=void 0;return t="true"===window.mm_config.EnforceMultifactorAuthentication?y.default.createElement("div",{className:"signup-header"},y.default.createElement("button",{className:"style--none color--link",onClick:this.handleOnClick},y.default.createElement("span",{className:"fa fa-chevron-left"}),y.default.createElement(M.FormattedMessage,{id:"web.header.logout",defaultMessage:"Logout"}))):y.default.createElement(S.default,null),y.default.createElement("div",{className:"inner-wrap"},y.default.createElement("div",{className:"row content"},y.default.createElement("div",null,t,y.default.createElement("div",{className:"col-sm-12"},y.default.createElement("div",{className:"signup-team__container"},y.default.createElement("h3",null,y.default.createElement(M.FormattedMessage,{id:"mfa.setupTitle",defaultMessage:"Multi-factor Authentication Setup"})),y.default.createElement("img",{className:"signup-team-logo",src:N.default}),y.default.createElement("div",{id:"mfa"},y.default.createElement(b.Switch,null,y.default.createElement(b.Route,{path:this.props.match.url+"/setup",render:function(t){return y.default.createElement(C.default,(0,l.default)({state:e.state,updateParent:e.updateParent},t))}}),y.default.createElement(b.Route,{path:this.props.match.url+"/confirm",render:function(t){return y.default.createElement(F.default,(0,l.default)({state:e.state,updateParent:e.updateParent},t))}}))))))))}}]),t}(y.default.Component);t.default=L,L.defaultProps={},L.propTypes={location:v.default.object.isRequired,children:v.default.node}},2549:function(e,t,a){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(239),l=r(n),o=a(238),u=r(o),s=a(242),d=r(s),i=a(240),c=r(i),f=a(241),m=r(f),p=a(13),h=r(p),g=a(697),v=a(717),E=a(707),y=r(E),M=a(698),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),_=function(t){function a(e){(0,u.default)(this,a);var t=(0,c.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return t.submit=t.submit.bind(t),t.state={secret:"",qrCode:""},t}return(0,m.default)(a,t),(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=y.default.getCurrentUser();if(!t||t.mfa_active)return void this.props.history.push("/");(0,v.generateMfaSecret)(function(t){return e.setState({secret:t.secret,qrCode:t.qr_code})},function(t){return e.setState({serverError:t.message})})}},{key:"submit",value:function(e){var t=this;e.preventDefault();var a=this.refs.code.value.replace(/\s/g,"");if(!a||0===a.length)return void this.setState({error:b.localizeMessage("mfa.setup.codeError","Please enter the code from Google Authenticator.")});this.setState({error:null}),(0,v.activateMfa)(a,function(){t.props.history.push("/mfa/confirm")},function(e){if("ent.mfa.activate.authenticate.app_error"===e.id)return void t.setState({error:b.localizeMessage("mfa.setup.badCode","Invalid code. If this issue persists, contact your System Administrator.")});t.setState({error:e.message})})}},{key:"render",value:function(){var t="form-group",a=void 0;this.state.error&&(a=h.default.createElement("div",{className:"form-group has-error"},h.default.createElement("label",{className:"control-label"},this.state.error)),t+=" has-error");var r=void 0;return"true"===e.window.mm_config.EnforceMultifactorAuthentication&&(r=h.default.createElement("p",null,h.default.createElement(g.FormattedHTMLMessage,{id:"mfa.setup.required",defaultMessage:"<strong>Multi-factor authentication is required on {siteName}.</strong>",values:{siteName:e.window.mm_config.SiteName}}))),h.default.createElement("div",null,h.default.createElement("form",{onSubmit:this.submit,className:t},r,h.default.createElement("p",null,h.default.createElement(g.FormattedHTMLMessage,{id:"mfa.setup.step1",defaultMessage:"<strong>Step 1: </strong>On your phone, download Google Authenticator from <a target='_blank' href='https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8'>iTunes</a> or <a target='_blank' href='https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en'>Google Play</a>"})),h.default.createElement("p",null,h.default.createElement(g.FormattedHTMLMessage,{id:"mfa.setup.step2",defaultMessage:"<strong>Step 2: </strong>Use Google Authenticator to scan this QR code, or manually type in the secret key"})),h.default.createElement("div",{className:"form-group"},h.default.createElement("div",{className:"col-sm-12"},h.default.createElement("img",{style:k.qrCode,src:"data:image/png;base64,"+this.state.qrCode}))),h.default.createElement("br",null),h.default.createElement("div",{className:"form-group"},h.default.createElement("p",{className:"col-sm-12"},h.default.createElement(g.FormattedMessage,{id:"mfa.setup.secret",defaultMessage:"Secret: {secret}",values:{secret:this.state.secret}}))),h.default.createElement("p",null,h.default.createElement(g.FormattedHTMLMessage,{id:"mfa.setup.step3",defaultMessage:"<strong>Step 3: </strong>Enter the code generated by Google Authenticator"})),h.default.createElement("p",null,h.default.createElement("input",{ref:"code",className:"form-control",placeholder:b.localizeMessage("mfa.setup.code","MFA Code"),autoFocus:!0})),a,h.default.createElement("button",{type:"submit",className:"btn btn-primary"},h.default.createElement(g.FormattedMessage,{id:"mfa.setup.save",defaultMessage:"Save"}))))}}]),a}(h.default.Component);t.default=_,_.defaultProps={},_.propTypes={};var k={qrCode:{maxHeight:170}}}).call(t,a(22))},2550:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(239),l=r(n),o=a(238),u=r(o),s=a(242),d=r(s),i=a(240),c=r(i),f=a(241),m=r(f),p=a(13),h=r(p),g=a(697),v=a(717),E=a(43),y=r(E),M=y.default.KeyCodes,b=function(e){function t(){var e,a,r,n;(0,u.default)(this,t);for(var o=arguments.length,s=Array(o),d=0;d<o;d++)s[d]=arguments[d];return a=r=(0,c.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(s))),r.submit=function(e){e.preventDefault(),(0,v.loadMe)().then(function(){r.props.history.push("/")})},r.onKeyPress=function(e){e.which===M.ENTER&&r.submit(e)},n=a,(0,c.default)(r,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.onKeyPress)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.onKeyPress)}},{key:"render",value:function(){return h.default.createElement("div",null,h.default.createElement("form",{onSubmit:this.submit,onKeyPress:this.onKeyPress,className:"form-group"},h.default.createElement("p",null,h.default.createElement(g.FormattedHTMLMessage,{id:"mfa.confirm.complete",defaultMessage:"<strong>Set up complete!</strong>"})),h.default.createElement("p",null,h.default.createElement(g.FormattedMessage,{id:"mfa.confirm.secure",defaultMessage:"Your account is now secure. Next time you sign in, you will be asked to enter a code from the Google Authenticator app on your phone."})),h.default.createElement("button",{type:"submit",className:"btn btn-primary"},h.default.createElement(g.FormattedMessage,{id:"mfa.confirm.okay",defaultMessage:"Okay"}))))}}]),t}(h.default.Component);t.default=b,b.defaultProps={},b.propTypes={}}});
//# sourceMappingURL=11.99990fe630c2420c387a.js.map