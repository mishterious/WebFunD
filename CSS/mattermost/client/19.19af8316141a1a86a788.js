webpackJsonp([19],{2509:function(e,a,t){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var s=t(239),r=l(s),i=t(238),d=l(i),o=t(240),u=l(o),c=t(242),m=l(c),p=t(241),f=l(p),g=t(21),h=l(g),w=t(13),v=l(w),L=t(697),_=t(244),E=t(248),y=t(742),S=t(715),P=n(S),M=t(761),b=t(717),N=t(698),k=n(N),C=t(791),I=l(C),T=t(792),D=l(T),F=t(762),A=l(F),U=function(a){function t(e){(0,d.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleLdapSignup=a.handleLdapSignup.bind(a),a.handleLdapSignupSuccess=a.handleLdapSignupSuccess.bind(a),a.handleLdapIdChange=a.handleLdapIdChange.bind(a),a.handleLdapPasswordChange=a.handleLdapPasswordChange.bind(a),a.state={ldapError:"",ldapId:"",ldapPassword:""},a}return(0,f.default)(t,a),(0,m.default)(t,null,[{key:"propTypes",get:function(){return{location:h.default.object}}}]),(0,m.default)(t,[{key:"componentDidMount",value:function(){(0,y.trackEvent)("signup","signup_user_01_welcome")}},{key:"handleLdapIdChange",value:function(e){this.setState({ldapId:e.target.value})}},{key:"handleLdapPasswordChange",value:function(e){this.setState({ldapPassword:e.target.value})}},{key:"handleLdapSignup",value:function(e){var a=this;e.preventDefault(),this.setState({ldapError:""}),(0,b.webLoginByLdap)(this.state.ldapId,this.state.ldapPassword,null,this.handleLdapSignupSuccess,function(e){a.setState({ldapError:e.message})})}},{key:"handleLdapSignupSuccess",value:function(){var e=this,a=new URLSearchParams(this.props.location.search).get("h"),t=new URLSearchParams(this.props.location.search).get("d"),n=new URLSearchParams(this.props.location.search).get("id");n||a?(0,M.addUserToTeamFromInvite)(t,a,n,function(){e.finishSignup()},function(){e.finishSignup()}):this.finishSignup()}},{key:"finishSignup",value:function(){var e=this;(0,b.loadMe)().then(function(){var a=new URLSearchParams(e.props.location.search).get("redirect_to");P.loadDefaultLocale(),a?E.browserHistory.push(a):P.redirectUserToDefaultTeam()})}},{key:"render",value:function(){var a=void 0;a=e.window.mm_config.LdapLoginFieldName?e.window.mm_config.LdapLoginFieldName:k.localizeMessage("login.ldapUsername","AD/LDAP Username");var t="";this.state.ldapError&&(t+=" has-error");var n=void 0;if("true"!==e.window.mm_config.EnableLdap||"true"!==e.window.mm_license.IsLicensed||!e.window.mm_license.LDAP)return null;n=v.default.createElement("div",{className:"inner__content"},v.default.createElement("h5",null,v.default.createElement("strong",null,v.default.createElement(L.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"}))),v.default.createElement("form",{onSubmit:this.handleLdapSignup},v.default.createElement("div",{className:"signup__email-container"},v.default.createElement(A.default,{error:this.state.ldapError,margin:!0}),v.default.createElement("div",{className:"form-group"+t},v.default.createElement("input",{className:"form-control",name:"ldapId",value:this.state.ldapId,placeholder:a,onChange:this.handleLdapIdChange,spellCheck:"false",autoCapitalize:"off"})),v.default.createElement("div",{className:"form-group"+t},v.default.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.ldapPassword,placeholder:k.localizeMessage("login.password","Password"),onChange:this.handleLdapPasswordChange,spellCheck:"false"})),v.default.createElement("div",{className:"form-group"},v.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!this.state.ldapId||!this.state.ldapPassword},v.default.createElement(L.FormattedMessage,{id:"login.signIn",defaultMessage:"Sign in"}))))));var l=null;n&&(l=v.default.createElement("p",null,v.default.createElement(L.FormattedHTMLMessage,{id:"create_team.agreement",defaultMessage:"By proceeding to create your account and use {siteName}, you agree to our <a href='{TermsOfServiceLink}'>Terms of Service</a> and <a href='{PrivacyPolicyLink}'>Privacy Policy</a>. If you do not agree, you cannot use {siteName}.",values:{siteName:e.window.mm_config.SiteName,TermsOfServiceLink:e.window.mm_config.TermsOfServiceLink,PrivacyPolicyLink:e.window.mm_config.PrivacyPolicyLink}})));var s=null;return s="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:v.default.createElement(L.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),v.default.createElement("div",null,v.default.createElement(D.default,null),v.default.createElement("div",{className:"col-sm-12"},v.default.createElement("div",{className:"signup-team__container padding--less"},v.default.createElement("img",{className:"signup-team-logo",src:I.default}),v.default.createElement("h1",null,e.window.mm_config.SiteName),v.default.createElement("h4",{className:"color--light"},s),v.default.createElement("h4",{className:"color--light"},v.default.createElement(L.FormattedMessage,{id:"signup_user_completed.lets",defaultMessage:"Let's create your account"})),v.default.createElement("span",{className:"color--light"},v.default.createElement(L.FormattedMessage,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",v.default.createElement(_.Link,{to:{pathname:"/login",search:this.props.location.search}},v.default.createElement(L.FormattedMessage,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))),n,l)))}}]),t}(v.default.Component);a.default=U}).call(a,t(22))}});
//# sourceMappingURL=19.19af8316141a1a86a788.js.map