webpackJsonp([12],{2544:function(e,t,a){"use strict";(function(e){function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(44),n=l(r),s=a(239),u=l(s),d=a(238),i=l(d),m=a(242),o=l(m),c=a(240),f=l(c),p=a(241),h=l(p),E=a(21),_=l(E),g=a(13),v=l(g),M=a(697),N=a(244),b=a(720),y=l(b),T=a(713),w=l(T),k=a(819),A=l(k),F=a(792),x=l(F),L=a(2545),S=l(L),P=a(2546),C=l(P),D=function(t){function a(e){(0,i.default)(this,a);var t=(0,f.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));t.submit=t.submit.bind(t),t.updateParent=t.updateParent.bind(t);var l={};return l.team={},l.wizard="display_name",t.state=l,t}return(0,h.default)(a,t),(0,o.default)(a,[{key:"submit",value:function(){}},{key:"updateParent",value:function(e){this.setState(e),this.props.history.push("/create_team/"+e.wizard)}},{key:"render",value:function(){var t=this,a=null;a="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:v.default.createElement(M.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});var l="/select_team",r=w.default.getCurrent(),s=y.default.getCurrent();return r&&(l="/"+r.name,s&&(l+="/channels/"+s.name)),v.default.createElement("div",null,v.default.createElement(A.default,null),v.default.createElement(x.default,{url:l}),v.default.createElement("div",{className:"col-sm-12"},v.default.createElement("div",{className:"signup-team__container"},v.default.createElement("h1",null,e.window.mm_config.SiteName),v.default.createElement("h4",{className:"color--light"},a),v.default.createElement("div",{className:"signup__content"},v.default.createElement(N.Switch,null,v.default.createElement(N.Route,{path:this.props.match.url+"/display_name",render:function(e){return v.default.createElement(C.default,(0,n.default)({state:t.state,updateParent:t.updateParent},e))}}),v.default.createElement(N.Route,{path:this.props.match.url+"/team_url",render:function(e){return v.default.createElement(S.default,(0,n.default)({state:t.state,updateParent:t.updateParent},e))}}),v.default.createElement(N.Redirect,{to:this.props.match.url+"/display_name"}))))))}}]),a}(v.default.Component);t.default=D,D.propTypes={children:_.default.node}}).call(t,a(22))},2545:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(249),n=l(r),s=a(239),u=l(s),d=a(238),i=l(d),m=a(242),o=l(m),c=a(240),f=l(c),p=a(241),h=l(p),E=a(21),_=l(E),g=a(13),v=l(g),M=a(709),N=a(246),b=l(N),y=a(697),T=a(742),w=a(761),k=a(43),A=l(k),F=a(731),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(F),L=a(791),S=l(L),P=function(e){function t(e){(0,i.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.submitBack=a.submitBack.bind(a),a.submitNext=a.submitNext.bind(a),a.handleFocus=a.handleFocus.bind(a),a.state={nameError:"",isLoading:!1},a}return(0,h.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){(0,T.trackEvent)("signup","signup_team_02_url")}},{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="display_name",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var t=this;e.preventDefault();var a=b.default.findDOMNode(this.refs.name).value.trim(),l=x.cleanUpUrlable(a),r=/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g;if(!a)return void this.setState({nameError:v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.required",defaultMessage:"This field is required"})});if(l.length<A.default.MIN_TEAMNAME_LENGTH||l.length>A.default.MAX_TEAMNAME_LENGTH)return void this.setState({nameError:v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}",values:{min:A.default.MIN_TEAMNAME_LENGTH,max:A.default.MAX_TEAMNAME_LENGTH}})});if(l!==a||!r.test(a))return void this.setState({nameError:v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.regex",defaultMessage:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."})});for(var s=0;s<A.default.RESERVED_TEAM_NAMES.length;s++)if(0===l.indexOf(A.default.RESERVED_TEAM_NAMES[s]))return void this.setState({nameError:v.default.createElement(y.FormattedHTMLMessage,{id:"create_team.team_url.taken",defaultMessage:'This URL <a href="https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url" target="_blank">starts with a reserved word</a> or is unavailable. Please try another.'})});this.setState({isLoading:!0});var u=JSON.parse((0,n.default)(this.props.state));u.team.type="O",u.team.name=a,(0,w.checkIfTeamExists)(a,function(e){if(e)return t.setState({nameError:v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.unavailable",defaultMessage:"This URL is taken or unavailable. Please try another."})}),void t.setState({isLoading:!1});(0,w.createTeam)(u.team,function(e){t.props.history.push("/"+e.name+"/channels/town-square"),(0,T.trackEvent)("signup","signup_team_03_complete")},function(e){t.setState({nameError:e.message}),t.setState({isLoading:!1})})},function(e){t.setState({nameError:e.message})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){var e=null,t="form-group";this.state.nameError&&(e=v.default.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=x.getSiteURL()+"/",l=v.default.createElement(M.Tooltip,{id:"urlTooltip"},a),r=v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.finish",defaultMessage:"Finish"});return this.state.isLoading&&(r=v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.creatingTeam",defaultMessage:"Creating team..."})),v.default.createElement("div",null,v.default.createElement("form",null,v.default.createElement("img",{className:"signup-team-logo",src:S.default}),v.default.createElement("h2",null,v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.teamUrl",defaultMessage:"Team URL"})),v.default.createElement("div",{className:t},v.default.createElement("div",{className:"row"},v.default.createElement("div",{className:"col-sm-11"},v.default.createElement("div",{className:"input-group input-group--limit"},v.default.createElement(M.OverlayTrigger,{trigger:["hover","focus"],delayShow:A.default.OVERLAY_TIME_DELAY,placement:"top",overlay:l},v.default.createElement("span",{className:"input-group-addon"},a)),v.default.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"})))),e),v.default.createElement("p",null,v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),v.default.createElement("ul",{className:"color--light"},v.default.createElement(y.FormattedHTMLMessage,{id:"create_team.team_url.hint",defaultMessage:"<li>Short and memorable is best</li> <li>Use lowercase letters, numbers and dashes</li> <li>Must start with a letter and can't end in a dash</li>"})),v.default.createElement("div",{className:"margin--extra"},v.default.createElement(M.Button,{type:"submit",bsStyle:"primary",disabled:this.state.isLoading,onClick:this.submitNext},r)),v.default.createElement("div",{className:"margin--extra"},v.default.createElement("a",{href:"#",onClick:this.submitBack},v.default.createElement(y.FormattedMessage,{id:"create_team.team_url.back",defaultMessage:"Back to previous step"})))))}}]),t}(v.default.Component);t.default=P,P.propTypes={state:_.default.object,updateParent:_.default.func}},2546:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(239),n=l(r),s=a(238),u=l(s),d=a(242),i=l(d),m=a(240),o=l(m),c=a(241),f=l(c),p=a(21),h=l(p),E=a(13),_=l(E),g=a(246),v=l(g),M=a(697),N=a(742),b=a(43),y=l(b),T=a(731),w=a(791),k=l(w),A=function(e){function t(e){(0,u.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.submitNext=a.submitNext.bind(a),a.state={},a}return(0,f.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){(0,N.trackEvent)("signup","signup_team_01_name")}},{key:"submitNext",value:function(e){e.preventDefault();var t=v.default.findDOMNode(this.refs.name).value.trim();return t?t.length<y.default.MIN_TEAMNAME_LENGTH||t.length>y.default.MAX_TEAMNAME_LENGTH?void this.setState({nameError:_.default.createElement(M.FormattedMessage,{id:"create_team.display_name.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description later.",values:{min:y.default.MIN_TEAMNAME_LENGTH,max:y.default.MAX_TEAMNAME_LENGTH}})}):(this.props.state.wizard="team_url",this.props.state.team.display_name=t,this.props.state.team.name=(0,T.cleanUpUrlable)(t),void this.props.updateParent(this.props.state)):void this.setState({nameError:_.default.createElement(M.FormattedMessage,{id:"create_team.display_name.required",defaultMessage:"This field is required"})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){var e=null,t="form-group";return this.state.nameError&&(e=_.default.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error"),_.default.createElement("div",null,_.default.createElement("form",null,_.default.createElement("img",{className:"signup-team-logo",src:k.default}),_.default.createElement("h2",null,_.default.createElement(M.FormattedMessage,{id:"create_team.display_name.teamName",defaultMessage:"Team Name"})),_.default.createElement("div",{className:t},_.default.createElement("div",{className:"row"},_.default.createElement("div",{className:"col-sm-9"},_.default.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.display_name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"}))),e),_.default.createElement("div",null,_.default.createElement(M.FormattedMessage,{id:"create_team.display_name.nameHelp",defaultMessage:"Name your team in any language. Your team name shows in menus and headings."})),_.default.createElement("button",{type:"submit",className:"btn btn-primary margin--extra",onClick:this.submitNext},_.default.createElement(M.FormattedMessage,{id:"create_team.display_name.next",defaultMessage:"Next"}),_.default.createElement("i",{className:"fa fa-chevron-right"}))))}}]),t}(_.default.Component);t.default=A,A.propTypes={state:h.default.object,updateParent:h.default.func}}});
//# sourceMappingURL=12.4f2b0608a9df61dc0999.js.map