webpackJsonp([8],{2537:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return(0,s.default)({},t)}function r(e){return{actions:(0,u.bindActionCreators)({getTeams:d.getTeams},e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(44),s=n(i),o=a(243),u=a(1),d=a(766),m=a(244),c=a(2538),f=n(c);t.default=(0,m.withRouter)((0,o.connect)(l,r)(f.default))},2538:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(722),i=l(r),s=a(777),o=l(s),u=a(239),d=l(u),m=a(238),c=l(m),f=a(242),p=l(f),g=a(240),h=l(g),v=a(241),_=l(v),E=a(21),y=l(E),C=a(13),M=l(C),T=a(697),w=a(244),b=a(715),k=n(b),N=a(761),S=a(713),L=l(S),O=a(707),j=l(O),F=a(725),P=n(F),A=a(698),I=n(A),R=a(791),x=l(R),q=a(819),D=l(q),U=a(792),B=l(U),Z=a(732),G=l(Z),J=a(2539),W=l(J),z=function(t){function a(e){(0,c.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,d.default)(a)).call(this,e));t.onTeamChange=function(){t.setState(t.getStateFromStores(!0))},t.handleTeamClick=function(e){t.setState({loadingTeamId:e.id}),(0,N.addUserToTeamFromInvite)("","",e.invite_id,function(){t.props.history.push("/"+e.name+"/channels/town-square")},function(e){t.setState({error:e,loadingTeamId:""})})},t.clearError=function(e){e.preventDefault(),t.setState({error:null})};var n=t.getStateFromStores(!1);return n.loadingTeamId="",n.error=null,t.state=n,t}return(0,_.default)(a,t),(0,p.default)(a,[{key:"componentDidMount",value:function(){L.default.addChangeListener(this.onTeamChange),this.props.actions.getTeams(0,200)}},{key:"componentWillUnmount",value:function(){L.default.removeChangeListener(this.onTeamChange)}},{key:"getStateFromStores",value:function(e){return{teams:L.default.getAll(),teamMembers:L.default.getMyTeamMembers(),teamListings:L.default.getTeamListings(),loaded:e}}},{key:"teamContentsCompare",value:function(e,t){return e.props.team.display_name.localeCompare(t.props.team.display_name)}},{key:"render",value:function(){var t=I.isSystemAdmin(j.default.getCurrentUser().roles),a=void 0;if(!this.state.loaded||this.state.loadingTeamId)a=M.default.createElement(G.default,null);else if(this.state.error)a=M.default.createElement("div",{className:"signup__content"},M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.error.message)));else{var n=[],l=new o.default,r=!0,s=!1,u=void 0;try{for(var d,m=(0,i.default)(this.state.teamMembers);!(r=(d=m.next()).done);r=!0){var c=d.value,f=c.team_id;l[f]=!0}}catch(e){s=!0,u=e}finally{try{!r&&m.return&&m.return()}finally{if(s)throw u}}for(var p in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(p)&&!l[p]){var g=this.state.teamListings[p];g&&0===g.delete_at&&n.push(M.default.createElement(W.default,{key:"team_"+g.name,team:g,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===g.id}))}0!==n.length||"true"!==e.window.mm_config.EnableTeamCreation&&!t?0===n.length&&(n=M.default.createElement("div",{className:"signup-team-dir-err"},M.default.createElement("div",null,M.default.createElement(T.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."})))):n=M.default.createElement("div",{className:"signup-team-dir-err"},M.default.createElement("div",null,M.default.createElement(T.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))),Array.isArray(n)&&(n=n.sort(this.teamContentsCompare)),a=M.default.createElement("div",{className:"signup__content"},M.default.createElement("h4",null,M.default.createElement(T.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),M.default.createElement("div",{className:"signup-team-all"},n))}var h=null;t&&"false"===e.window.mm_config.EnableTeamCreation&&(h=M.default.createElement(T.FormattedMessage,{id:"login.createTeamAdminOnly",defaultMessage:"This option is only available for System Administrators, and does not show up for other users."}));var v=void 0;(t||"true"===e.window.mm_config.EnableTeamCreation)&&(v=M.default.createElement("div",{className:"margin--extra"},M.default.createElement(w.Link,{to:"/create_team",className:"signup-team-login"},M.default.createElement(T.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a new team"})),M.default.createElement("div",null,h)));var _=void 0;t&&!P.isMobileApp()&&(_=M.default.createElement("div",{className:"margin--extra hidden-xs"},M.default.createElement(w.Link,{to:"/admin_console",className:"signup-team-login"},M.default.createElement(T.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))));var E=null;E="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:M.default.createElement(T.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});var y=void 0;return y=this.state.error?M.default.createElement(B.default,{onClick:this.clearError}):this.state.teamMembers.length?M.default.createElement(B.default,null):M.default.createElement("div",{className:"signup-header"},M.default.createElement("a",{href:"#",onClick:k.emitUserLoggedOutEvent},M.default.createElement("span",{className:"fa fa-chevron-left"}),M.default.createElement(T.FormattedMessage,{id:"web.header.logout"}))),M.default.createElement("div",null,M.default.createElement(D.default,null),y,M.default.createElement("div",{className:"col-sm-12"},M.default.createElement("div",{className:"signup-team__container"},M.default.createElement("img",{className:"signup-team-logo",src:x.default}),M.default.createElement("h1",null,e.window.mm_config.SiteName),M.default.createElement("h4",{className:"color--light"},E),a,v,_)))}}]),a}(M.default.Component);z.propTypes={actions:y.default.shape({getTeams:y.default.func.isRequired}).isRequired},t.default=z}).call(t,a(22))},2539:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(239),r=n(l),i=a(238),s=n(i),o=a(242),u=n(o),d=a(240),m=n(d),c=a(241),f=n(c),p=a(21),g=n(p),h=a(13),v=n(h),_=a(709),E=a(2540),y=n(E),C=a(698),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(C),T=function(e){function t(){var e,a,n,l;(0,s.default)(this,t);for(var i=arguments.length,o=Array(i),u=0;u<i;u++)o[u]=arguments[u];return a=n=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.handleTeamClick=function(e){e.preventDefault(),n.props.onTeamClick(n.props.team)},l=a,(0,m.default)(n,l)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=void 0;e=this.props.loading?v.default.createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon"}):v.default.createElement("span",{className:"fa fa-angle-right right signup-team__icon"});var t="",a="";return this.props.team.description&&(t=v.default.createElement(_.Tooltip,{id:"team-description__tooltip"},this.props.team.description),a=v.default.createElement(_.OverlayTrigger,{trigger:["hover","focus","click"],delayShow:1e3,placement:"top",overlay:t,ref:"descriptionOverlay",rootClose:!0,container:this},v.default.createElement(y.default,{className:"icon icon--info"}))),v.default.createElement("div",{className:"signup-team-dir"},a,v.default.createElement("a",{href:"#",id:M.createSafeId(this.props.team.display_name),onClick:this.handleTeamClick},v.default.createElement("span",{className:"signup-team-dir__name"},this.props.team.display_name),e))}}]),t}(v.default.PureComponent);T.propTypes={team:g.default.object.isRequired,onTeamClick:g.default.func.isRequired,loading:g.default.bool.isRequired},t.default=T},2540:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(239),r=n(l),i=a(238),s=n(i),o=a(242),u=n(o),d=a(240),m=n(d),c=a(241),f=n(c),p=a(13),g=n(p),h=function(e){function t(){return(0,s.default)(this,t),(0,m.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return g.default.createElement("span",this.props,g.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:v},g.default.createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},g.default.createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"}))))}}]),t}(g.default.PureComponent);t.default=h;var v={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}}});
//# sourceMappingURL=8.814dbdf84e1f64deb95d.js.map