webpackJsonp([18],{2505:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(239),r=n(l),s=a(238),i=n(s),o=a(242),u=n(o),d=a(240),c=n(d),m=a(241),f=n(m),g=a(21),p=n(g),h=a(13),E=n(h),v=a(697),w=a(244),_=a(245),b=a(248),M=a(715),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),S=a(761),y=a(717),k=a(767),L=n(k),I=a(707),C=n(I),F=a(791),A=n(F),O=a(819),U=n(O),P=a(792),T=n(P),G=a(762),x=n(G),D=a(732),R=n(D),W=a(43),B=function(t){function a(t){(0,i.default)(this,a);var n=(0,c.default)(this,(a.__proto__||(0,r.default)(a)).call(this,t));H.call(n),n.renderSignupControls=n.renderSignupControls.bind(n);var l=!1,s="",o=!1,u=!1;if(n.props.location.search){var d=new URLSearchParams(n.props.location.search),m=d.get("h");null==m&&(m="");var f=d.get("id");null==f&&(f=""),f?l=!0:m&&!C.default.getCurrentUser()?u=L.default.getGlobalItem(m):f||"true"===e.window.mm_config.EnableOpenServer||C.default.getNoAccounts()||(o=!0,s=E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."}))}return n.state={loading:l,serverError:s,noOpenServerError:o,usedBefore:u},n}return(0,f.default)(a,t),(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this;if(L.default.removeGlobalItem("team"),this.props.location.search){var t=new URLSearchParams(this.props.location.search),a=t.get("h")||"",n=t.get("d")||"",l=t.get("id")||"",r=null!=C.default.getCurrentUser();if((l||a)&&r)return void(0,S.addUserToTeamFromInvite)(n,a,l,function(e){(0,y.loadMe)().then(function(){b.browserHistory.push("/"+e.name+"/channels/"+W.Constants.DEFAULT_CHANNEL)})},this.handleInvalidInvite);if(l)return void(0,S.getInviteInfo)(l,function(t){t&&e.setState({serverError:"",loading:!1})},this.handleInvalidInvite);r&&N.redirectUserToDefaultTeam()}}},{key:"renderSignupControls",value:function(){var t=[];if("true"===e.window.mm_config.EnableSignUpWithEmail&&t.push(E.default.createElement(w.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon fa fa-envelope"}),E.default.createElement(v.FormattedMessage,{id:"signup.email",defaultMessage:"Email and Password"})))),"true"===e.window.mm_config.EnableSignUpWithGitLab&&t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:_.Client4.getOAuthRoute()+"/gitlab/signup"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithGoogle&&t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:_.Client4.getOAuthRoute()+"/google/signup"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.google",defaultMessage:"Google Account"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithOffice365&&t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:_.Client4.getOAuthRoute()+"/office365/signup"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.office365",defaultMessage:"Office 365"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap&&t.push(E.default.createElement(w.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/signup_ldap"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon fa fa-folder-open fa--margin-top"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSaml){var a="";a=window.location.search?"&action=signup":"?action=signup",t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full saml",key:"saml",href:"/login/sso/saml"+window.location.search+a},E.default.createElement("span",null,E.default.createElement("span",{className:"icon fa fa-lock fa--margin-top"}),E.default.createElement("span",null,e.window.mm_config.SamlLoginButtonText))))}if(0===t.length){var n=E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});t=E.default.createElement(x.default,{error:n,margin:!0})}else if(1===t.length){if("true"===e.window.mm_config.EnableSignUpWithEmail)return b.browserHistory.push("/signup_email"+window.location.search);if("true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap)return b.browserHistory.push("/signup_ldap"+window.location.search)}return t}},{key:"render",value:function(){if(this.state.loading)return E.default.createElement(R.default,null);if(this.state.usedBefore)return E.default.createElement("div",null,E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var t=null;this.state.serverError&&(t=E.default.createElement("div",{className:"form-group has-error"},E.default.createElement("label",{className:"control-label"},this.state.serverError)));var a=void 0;return a=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),E.default.createElement("div",null,E.default.createElement(U.default,null),E.default.createElement(T.default,null),E.default.createElement("div",{className:"col-sm-12"},E.default.createElement("div",{className:"signup-team__container"},E.default.createElement("img",{className:"signup-team-logo",src:A.default}),E.default.createElement("div",{className:"signup__content"},E.default.createElement("h1",null,e.window.mm_config.SiteName),E.default.createElement("h4",{className:"color--light"},E.default.createElement(v.FormattedMessage,{id:"web.root.signup_info"})),E.default.createElement("div",{className:"margin--extra"},E.default.createElement("h5",null,E.default.createElement("strong",null,E.default.createElement(v.FormattedMessage,{id:"signup.title",defaultMessage:"Create an account with:"})))),a,t),E.default.createElement("span",{className:"color--light"},E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",E.default.createElement(w.Link,{to:"/login"+this.props.location.search},E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}]),a}(E.default.Component),H=function(){var e=this;this.handleInvalidInvite=function(t){var a=void 0;a="store.sql_user.save.max_accounts.app_error"===t.server_error_id?t.message:E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),e.setState({noOpenServerError:!0,loading:!1,serverError:a})}};t.default=B,B.propTypes={location:p.default.object}}).call(t,a(22))}});
//# sourceMappingURL=18.808086bf6e17b91f5ec0.js.map