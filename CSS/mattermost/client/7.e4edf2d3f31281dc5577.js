webpackJsonp([7],{2516:function(e,a,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(44),s=r(l),o=t(239),i=r(o),d=t(238),u=r(d),n=t(242),m=r(n),c=t(240),f=r(c),p=t(241),h=r(p),w=t(21),_=r(w),E=t(13),v=r(E),g=t(244),b=t(791),y=r(b),M=t(792),P=r(M),S=t(2517),N=r(S),k=t(2518),A=r(k),D=t(2519),L=r(D),T=t(2520),C=r(T),F=function(e){function a(e){(0,u.default)(this,a);var t=(0,f.default)(this,(a.__proto__||(0,i.default)(a)).call(this,e));return t.state={},t}return(0,h.default)(a,e),(0,m.default)(a,[{key:"componentWillMount",value:function(){this.setState({email:new URLSearchParams(this.props.location.search).get("email"),newType:new URLSearchParams(this.props.location.search).get("new_type"),currentType:new URLSearchParams(this.props.location.search).get("old_type")})}},{key:"render",value:function(){var e=this;return v.default.createElement("div",null,v.default.createElement(P.default,null),v.default.createElement("div",{className:"col-sm-12"},v.default.createElement("div",{className:"signup-team__container"},v.default.createElement("img",{className:"signup-team-logo",src:y.default}),v.default.createElement("div",{id:"claim"},v.default.createElement(g.Switch,null,v.default.createElement(g.Route,{path:this.props.match.url+"/oauth_to_email",render:function(a){return v.default.createElement(N.default,(0,s.default)({},e.state,a))}}),v.default.createElement(g.Route,{path:this.props.match.url+"/email_to_oauth",render:function(a){return v.default.createElement(A.default,(0,s.default)({},e.state,a))}}),v.default.createElement(g.Route,{path:this.props.match.url+"/ldap_to_email",render:function(a){return v.default.createElement(L.default,(0,s.default)({},e.state,a))}}),v.default.createElement(g.Route,{path:this.props.match.url+"/email_to_ldap",render:function(a){return v.default.createElement(C.default,(0,s.default)({},e.state,a))}}))))))}}]),a}(v.default.Component);a.default=F,F.defaultProps={},F.propTypes={location:_.default.object.isRequired,children:_.default.node}},2517:function(e,a,t){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(239),s=r(l),o=t(238),i=r(o),d=t(242),u=r(d),n=t(240),m=r(n),c=t(241),f=r(c),p=t(21),h=r(p),w=t(13),_=r(w),E=t(246),v=r(E),g=t(697),b=t(738),y=t(43),M=r(y),P=t(698),S=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(P),N=function(a){function t(e){(0,i.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.submit=a.submit.bind(a),a.state={},a}return(0,f.default)(t,a),(0,u.default)(t,[{key:"submit",value:function(e){var a=this;e.preventDefault();var t={},r=v.default.findDOMNode(this.refs.password).value;if(!r)return t.error=S.localizeMessage("claim.oauth_to_email.enterPwd","Please enter a password."),void this.setState(t);var l=S.isValidPassword(r,S.getPasswordConfig());if(""!==l)return void this.setState({error:l});var s=v.default.findDOMNode(this.refs.passwordconfirm).value;if(!s||r!==s)return t.error=S.localizeMessage("claim.oauth_to_email.pwdNotMatch","Password do not match."),void this.setState(t);t.error=null,this.setState(t),(0,b.oauthToEmail)(this.props.currentType,this.props.email,r,null,function(e){a.setState({error:e.message})})}},{key:"render",value:function(){var a=null;this.state.error&&(a=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.error)));var t="form-group";a&&(t+=" has-error");var r=(this.props.currentType===M.default.SAML_SERVICE?M.default.SAML_SERVICE.toUpperCase():S.toTitleCase(this.props.currentType))+" SSO";return _.default.createElement("div",null,_.default.createElement("h3",null,_.default.createElement(g.FormattedMessage,{id:"claim.oauth_to_email.title",defaultMessage:"Switch {type} Account to Email",values:{type:r}})),_.default.createElement("form",{onSubmit:this.submit},_.default.createElement("p",null,_.default.createElement(g.FormattedMessage,{id:"claim.oauth_to_email.description",defaultMessage:"Upon changing your account type, you will only be able to login with your email and password."})),_.default.createElement("p",null,_.default.createElement(g.FormattedMessage,{id:"claim.oauth_to_email.enterNewPwd",defaultMessage:"Enter a new password for your {site} email account",values:{site:e.window.mm_config.SiteName}})),_.default.createElement("div",{className:t},_.default.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:S.localizeMessage("claim.oauth_to_email.newPwd","New Password"),spellCheck:"false"})),_.default.createElement("div",{className:t},_.default.createElement("input",{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:S.localizeMessage("claim.oauth_to_email.confirm","Confirm Password"),spellCheck:"false"})),a,_.default.createElement("button",{type:"submit",className:"btn btn-primary"},_.default.createElement(g.FormattedMessage,{id:"claim.oauth_to_email.switchTo",defaultMessage:"Switch {type} to email and password",values:{type:r}}))))}}]),t}(_.default.Component);a.default=N,N.defaultProps={},N.propTypes={currentType:h.default.string,email:h.default.string}}).call(a,t(22))},2518:function(e,a,t){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(239),s=r(l),o=t(238),i=r(o),d=t(242),u=r(d),n=t(240),m=r(n),c=t(241),f=r(c),p=t(21),h=r(p),w=t(13),_=r(w),E=t(246),v=r(E),g=t(697),b=t(738),y=t(717),M=t(43),P=r(M),S=t(698),N=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(S),k=t(925),A=r(k),D=function(a){function t(e){(0,i.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.submit=a.submit.bind(a),a.preSubmit=a.preSubmit.bind(a),a.state={showMfa:!1,password:""},a}return(0,f.default)(t,a),(0,u.default)(t,[{key:"preSubmit",value:function(e){var a=this;e.preventDefault();var t={},r=v.default.findDOMNode(this.refs.password).value;if(!r)return t.error=N.localizeMessage("claim.email_to_oauth.pwdError","Please enter your password."),void this.setState(t);this.setState({password:r}),t.error=null,this.setState(t),(0,y.checkMfa)(this.props.email,function(e){e?a.setState({showMfa:!0}):a.submit(a.props.email,r,"")},function(e){a.setState({error:e.message})})}},{key:"submit",value:function(e,a,t){var r=this;(0,b.emailToOAuth)(e,a,t,this.props.newType,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){r.setState({error:e.message,showMfa:!1})})}},{key:"render",value:function(){var a=null;this.state.error&&(a=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.error)));var t="form-group";a&&(t+=" has-error");var r=this.props.newType===P.default.SAML_SERVICE?P.default.SAML_SERVICE.toUpperCase():N.toTitleCase(this.props.newType),l=r+" SSO",s=void 0;return s=this.state.showMfa?_.default.createElement(A.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):_.default.createElement("form",{onSubmit:this.preSubmit},_.default.createElement("p",null,_.default.createElement(g.FormattedMessage,{id:"claim.email_to_oauth.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with {type} SSO",values:{type:r}})),_.default.createElement("p",null,_.default.createElement(g.FormattedMessage,{id:"claim.email_to_oauth.ssoNote",defaultMessage:"You must already have a valid {type} account",values:{type:r}})),_.default.createElement("p",null,_.default.createElement(g.FormattedMessage,{id:"claim.email_to_oauth.enterPwd",defaultMessage:"Enter the password for your {site} account",values:{site:e.window.mm_config.SiteName}})),_.default.createElement("div",{className:t},_.default.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:N.localizeMessage("claim.email_to_oauth.pwd","Password"),spellCheck:"false"})),a,_.default.createElement("button",{type:"submit",className:"btn btn-primary"},_.default.createElement(g.FormattedMessage,{id:"claim.email_to_oauth.switchTo",defaultMessage:"Switch account to {uiType}",values:{uiType:l}}))),_.default.createElement("div",null,_.default.createElement("h3",null,_.default.createElement(g.FormattedMessage,{id:"claim.email_to_oauth.title",defaultMessage:"Switch Email/Password Account to {uiType}",values:{uiType:l}})),s)}}]),t}(_.default.Component);a.default=D,D.defaultProps={},D.propTypes={newType:h.default.string,email:h.default.string}}).call(a,t(22))},2519:function(e,a,t){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(239),s=r(l),o=t(238),i=r(o),d=t(242),u=r(d),n=t(240),m=r(n),c=t(241),f=r(c),p=t(21),h=r(p),w=t(13),_=r(w),E=t(697),v=t(717),g=t(698),b=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(g),y=t(925),M=r(y),P=function(a){function t(e){(0,i.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.submit=a.submit.bind(a),a.preSubmit=a.preSubmit.bind(a),a.state={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""},a}return(0,f.default)(t,a),(0,u.default)(t,[{key:"preSubmit",value:function(e){var a=this;e.preventDefault();var t={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""},r=this.refs.ldappassword.value;if(!r)return t.ldapPasswordError=b.localizeMessage("claim.ldap_to_email.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(t);var l=this.refs.password.value;if(!l)return t.passwordError=b.localizeMessage("claim.ldap_to_email.pwdError","Please enter your password."),void this.setState(t);var s=b.isValidPassword(l,b.getPasswordConfig());if(""!==s)return void this.setState({passwordError:s});var o=this.refs.passwordconfirm.value;if(!o||l!==o)return t.confirmError=b.localizeMessage("claim.ldap_to_email.pwdNotMatch","Passwords do not match."),void this.setState(t);t.password=l,t.ldapPassword=r,this.setState(t),(0,v.checkMfa)(this.props.email,function(e){e?a.setState({showMfa:!0}):a.submit(a.props.email,l,"",r)},function(e){a.setState({error:e.message})})}},{key:"submit",value:function(e,a,t,r){var l=this;(0,v.switchFromLdapToEmail)(this.props.email,a,t,r||this.state.ldapPassword,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){if(e.id.startsWith("model.user.is_valid.pwd"))l.setState({passwordError:e.message,showMfa:!1});else switch(e.id){case"ent.ldap.do_login.invalid_password.app_error":l.setState({ldapPasswordError:e.message,showMfa:!1});break;default:l.setState({serverError:e.message,showMfa:!1})}})}},{key:"render",value:function(){var a=null,t="form-group";this.state.serverError&&(a=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.serverError)),t+=" has-error");var r=null,l="form-group";this.state.passwordError&&(r=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.passwordError)),l+=" has-error");var s=null,o="form-group";this.state.ldapPasswordError&&(s=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),o+=" has-error");var i=null,d="form-group";this.state.confirmError&&(i=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.confirmError)),d+=" has-error");var u=void 0;u=e.window.mm_config.LdapPasswordFieldName?e.window.mm_config.LdapPasswordFieldName:b.localizeMessage("claim.ldap_to_email.ldapPwd","AD/LDAP Password");var n=void 0;return n=this.state.showMfa?_.default.createElement(M.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):_.default.createElement("form",{onSubmit:this.preSubmit,className:t},_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.ldap_to_email.email",defaultMessage:"After switching your authentication method, you will use {email} to login. Your AD/LDAP credentials will no longer allow access to Mattermost.",values:{email:this.props.email}})),_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.ldap_to_email.enterLdapPwd",defaultMessage:"{ldapPassword}:",values:{ldapPassword:u}})),_.default.createElement("div",{className:o},_.default.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",placeholder:u,spellCheck:"false"})),s,_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.ldap_to_email.enterPwd",defaultMessage:"New email login password:"})),_.default.createElement("div",{className:l},_.default.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:b.localizeMessage("claim.ldap_to_email.pwd","Password"),spellCheck:"false"})),r,_.default.createElement("div",{className:d},_.default.createElement("input",{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:b.localizeMessage("claim.ldap_to_email.confirm","Confirm Password"),spellCheck:"false"})),i,_.default.createElement("button",{type:"submit",className:"btn btn-primary"},_.default.createElement(E.FormattedMessage,{id:"claim.ldap_to_email.switchTo",defaultMessage:"Switch account to email/password"})),a),_.default.createElement("div",null,_.default.createElement("h3",null,_.default.createElement(E.FormattedMessage,{id:"claim.ldap_to_email.title",defaultMessage:"Switch AD/LDAP Account to Email/Password"})),n)}}]),t}(_.default.Component);a.default=P,P.defaultProps={},P.propTypes={email:h.default.string}}).call(a,t(22))},2520:function(e,a,t){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(239),s=r(l),o=t(238),i=r(o),d=t(242),u=r(d),n=t(240),m=r(n),c=t(241),f=r(c),p=t(21),h=r(p),w=t(13),_=r(w),E=t(697),v=t(738),g=t(717),b=t(698),y=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(b),M=t(925),P=r(M),S=function(a){function t(e){(0,i.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.submit=a.submit.bind(a),a.preSubmit=a.preSubmit.bind(a),a.state={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:"",showMfa:!1},a}return(0,f.default)(t,a),(0,u.default)(t,[{key:"preSubmit",value:function(e){var a=this;e.preventDefault();var t={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:""},r=this.refs.emailpassword.value;if(!r)return t.passwordError=y.localizeMessage("claim.email_to_ldap.pwdError","Please enter your password."),void this.setState(t);var l=this.refs.ldapid.value.trim();if(!l)return t.ldapError=y.localizeMessage("claim.email_to_ldap.ldapIdError","Please enter your AD/LDAP ID."),void this.setState(t);var s=this.refs.ldappassword.value;if(!s)return t.ldapPasswordError=y.localizeMessage("claim.email_to_ldap.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(t);t.password=r,t.ldapId=l,t.ldapPassword=s,this.setState(t),(0,g.checkMfa)(this.props.email,function(e){e?a.setState({showMfa:!0}):a.submit(a.props.email,r,"",l,s)},function(e){a.setState({error:e.message})})}},{key:"submit",value:function(e,a,t,r,l){var s=this;(0,v.emailToLdap)(e,a,t,r||this.state.ldapId,l||this.state.ldapPassword,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){switch(e.id){case"ent.ldap.do_login.user_not_registered.app_error":case"ent.ldap.do_login.user_filtered.app_error":case"ent.ldap.do_login.matched_to_many_users.app_error":s.setState({ldapError:e.message,showMfa:!1});break;case"ent.ldap.do_login.invalid_password.app_error":s.setState({ldapPasswordError:e.message,showMfa:!1});break;case"api.user.check_user_password.invalid.app_error":s.setState({passwordError:e.message,showMfa:!1});break;default:s.setState({serverError:e.message,showMfa:!1})}})}},{key:"render",value:function(){var a=null,t="form-group";this.state.serverError&&(a=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.serverError)),t+=" has-error");var r=null,l="form-group";this.state.passwordError&&(r=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.passwordError)),l+=" has-error");var s=null,o="form-group";this.state.ldapError&&(s=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.ldapError)),o+=" has-error");var i=null,d="form-group";this.state.ldapPasswordError&&(i=_.default.createElement("div",{className:"form-group has-error"},_.default.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),d+=" has-error");var u=void 0;u=e.window.mm_config.LdapLoginFieldName?e.window.mm_config.LdapLoginFieldName:y.localizeMessage("claim.email_to_ldap.ldapId","AD/LDAP ID");var n=void 0;n=e.window.mm_config.LdapPasswordFieldName?e.window.mm_config.LdapPasswordFieldName:y.localizeMessage("claim.email_to_ldap.ldapPwd","AD/LDAP Password");var m=void 0;return m=this.state.showMfa?_.default.createElement(P.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):_.default.createElement("form",{onSubmit:this.preSubmit,className:t},_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.email_to_ldap.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with AD/LDAP"})),_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.email_to_ldap.ssoNote",defaultMessage:"You must already have a valid AD/LDAP account"})),_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.email_to_ldap.enterPwd",defaultMessage:"Enter the password for your {site} email account",values:{site:e.window.mm_config.SiteName}})),_.default.createElement("input",{type:"text",style:N.usernameInput,name:"fakeusernameremembered"}),_.default.createElement("div",{className:l},_.default.createElement("input",{type:"password",className:"form-control",name:"emailPassword",ref:"emailpassword",autoComplete:"off",placeholder:y.localizeMessage("claim.email_to_ldap.pwd","Password"),spellCheck:"false"})),r,_.default.createElement("p",null,_.default.createElement(E.FormattedMessage,{id:"claim.email_to_ldap.enterLdapPwd",defaultMessage:"Enter the ID and password for your AD/LDAP account"})),_.default.createElement("div",{className:o},_.default.createElement("input",{type:"text",className:"form-control",name:"ldapId",ref:"ldapid",autoComplete:"off",placeholder:u,spellCheck:"false"})),s,_.default.createElement("div",{className:d},_.default.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",autoComplete:"off",placeholder:n,spellCheck:"false"})),i,_.default.createElement("button",{type:"submit",className:"btn btn-primary"},_.default.createElement(E.FormattedMessage,{id:"claim.email_to_ldap.switchTo",defaultMessage:"Switch account to AD/LDAP"})),a),_.default.createElement("div",null,_.default.createElement("h3",null,_.default.createElement(E.FormattedMessage,{id:"claim.email_to_ldap.title",defaultMessage:"Switch Email/Password Account to AD/LDAP"})),m)}}]),t}(_.default.Component);a.default=S,S.defaultProps={},S.propTypes={email:h.default.string};var N={usernameInput:{display:"none"}}}).call(a,t(22))}});
//# sourceMappingURL=7.e4edf2d3f31281dc5577.js.map