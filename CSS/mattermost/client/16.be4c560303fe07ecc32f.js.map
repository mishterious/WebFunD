{"version":3,"sources":["webpack:///16.be4c560303fe07ecc32f.js","webpack:///./components/do_verify_email/index.js","webpack:///./components/do_verify_email/do_verify_email.jsx"],"names":["webpackJsonp","2513","module","exports","__webpack_require__","mapDispatchToProps","dispatch","actions","verifyUserEmail","_redux","bindActionCreators","_users","Object","defineProperty","value","_reactRedux","_do_verify_email","_do_verify_email2","obj","__esModule","default","connect","2514","global","_interopRequireDefault","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactIntl","_browser_history","_logo","_logo2","_back_button","_back_button2","_loading_screen","_loading_screen2","DoVerifyEmail","_React$PureComponent","props","_this2","this","_this","__proto__","call","verifyEmail","mark","_callee","verify","serverError","wrap","_context","prev","next","URLSearchParams","location","search","get","sent","data","browserHistory","push","encodeURIComponent","error","createElement","FormattedMessage","id","defaultMessage","setState","verifyStatus","stop","state","key","className","src","window","mm_config","SiteName","PureComponent","propTypes","object","isRequired","shape","func","defaultProps"],"mappings":"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","file":"16.be4c560303fe07ecc32f.js","sourcesContent":["webpackJsonp([16],{\n\n/***/ 2513:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _redux = __webpack_require__(1);\n\nvar _reactRedux = __webpack_require__(243);\n\nvar _users = __webpack_require__(724);\n\nvar _do_verify_email = __webpack_require__(2514);\n\nvar _do_verify_email2 = _interopRequireDefault(_do_verify_email);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: {\n            verifyUserEmail: (0, _redux.bindActionCreators)(_users.verifyUserEmail, dispatch)\n        }\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(null, mapDispatchToProps)(_do_verify_email2.default);\n\n/***/ }),\n\n/***/ 2514:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _regenerator = __webpack_require__(106);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(107);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = __webpack_require__(239);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(238);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(242);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(240);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(241);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(21);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(13);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(697);\n\nvar _browser_history = __webpack_require__(248);\n\nvar _logo = __webpack_require__(791);\n\nvar _logo2 = _interopRequireDefault(_logo);\n\nvar _back_button = __webpack_require__(792);\n\nvar _back_button2 = _interopRequireDefault(_back_button);\n\nvar _loading_screen = __webpack_require__(732);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DoVerifyEmail = function (_React$PureComponent) {\n    (0, _inherits3.default)(DoVerifyEmail, _React$PureComponent);\n\n    function DoVerifyEmail(props) {\n        var _this2 = this;\n\n        (0, _classCallCheck3.default)(this, DoVerifyEmail);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (DoVerifyEmail.__proto__ || (0, _getPrototypeOf2.default)(DoVerifyEmail)).call(this, props));\n\n        _this.verifyEmail = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {\n            var verifyUserEmail, verify, serverError;\n            return _regenerator2.default.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            verifyUserEmail = _this.props.actions.verifyUserEmail;\n                            _context.next = 3;\n                            return verifyUserEmail(new URLSearchParams(_this.props.location.search).get('token'));\n\n                        case 3:\n                            verify = _context.sent;\n\n\n                            if (verify && verify.data) {\n                                _browser_history.browserHistory.push('/login?extra=verified&email=' + encodeURIComponent(new URLSearchParams(_this.props.location.search).get('email')));\n                            } else if (verify && verify.error) {\n                                serverError = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'signup_user_completed.invalid_invite',\n                                    defaultMessage: 'The invite link was invalid.  Please speak with your Administrator to receive an invitation.'\n                                });\n\n                                _this.setState({\n                                    verifyStatus: 'failure',\n                                    serverError: serverError\n                                });\n                            }\n\n                        case 5:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this2);\n        }));\n\n\n        _this.state = {\n            verifyStatus: 'pending',\n            serverError: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(DoVerifyEmail, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            this.verifyEmail();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.state.verifyStatus !== 'failure') {\n                return _react2.default.createElement(_loading_screen2.default, null);\n            }\n\n            var serverError = null;\n            if (this.state.serverError) {\n                serverError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.serverError\n                    )\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(_back_button2.default, null),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'col-sm-12' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'signup-team__container' },\n                        _react2.default.createElement('img', {\n                            className: 'signup-team-logo',\n                            src: _logo2.default\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'signup__content' },\n                            _react2.default.createElement(\n                                'h1',\n                                null,\n                                global.window.mm_config.SiteName\n                            ),\n                            _react2.default.createElement(\n                                'h4',\n                                { className: 'color--light' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'web.root.signup_info',\n                                    defaultMessage: 'All team communication in one place, searchable and accessible anywhere'\n                                })\n                            ),\n                            serverError\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return DoVerifyEmail;\n}(_react2.default.PureComponent); // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nDoVerifyEmail.propTypes = {\n\n    /**\n     * Object with validation parameters given in link\n     */\n    location: _propTypes2.default.object.isRequired,\n\n    /*\n     * Object with redux action creators\n     */\n    actions: _propTypes2.default.shape({\n\n        /*\n         * Action creator to verify the user's email\n         */\n        verifyUserEmail: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = DoVerifyEmail;\n\n\nDoVerifyEmail.defaultProps = {\n    location: {}\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(22)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 16.be4c560303fe07ecc32f.js","// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {verifyUserEmail} from 'mattermost-redux/actions/users';\n\nimport DoVerifyEmail from './do_verify_email.jsx';\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: {\n            verifyUserEmail: bindActionCreators(verifyUserEmail, dispatch)\n        }\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(DoVerifyEmail);\n\n\n\n// WEBPACK FOOTER //\n// ./components/do_verify_email/index.js","// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {browserHistory} from 'utils/browser_history';\nimport logoImage from 'images/logo.png';\nimport BackButton from 'components/common/back_button.jsx';\nimport LoadingScreen from 'components/loading_screen.jsx';\n\nexport default class DoVerifyEmail extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * Object with validation parameters given in link\n         */\n        location: PropTypes.object.isRequired,\n\n        /*\n         * Object with redux action creators\n         */\n        actions: PropTypes.shape({\n\n            /*\n             * Action creator to verify the user's email\n             */\n            verifyUserEmail: PropTypes.func.isRequired\n        }).isRequired\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            verifyStatus: 'pending',\n            serverError: ''\n        };\n    }\n\n    componentWillMount() {\n        this.verifyEmail();\n    }\n\n    verifyEmail = async () => {\n        const {actions: {verifyUserEmail}} = this.props;\n        const verify = await verifyUserEmail((new URLSearchParams(this.props.location.search)).get('token'));\n\n        if (verify && verify.data) {\n            browserHistory.push('/login?extra=verified&email=' + encodeURIComponent((new URLSearchParams(this.props.location.search)).get('email')));\n        } else if (verify && verify.error) {\n            const serverError = (\n                <FormattedMessage\n                    id='signup_user_completed.invalid_invite'\n                    defaultMessage='The invite link was invalid.  Please speak with your Administrator to receive an invitation.'\n                />\n            );\n            this.setState({\n                verifyStatus: 'failure',\n                serverError\n            });\n        }\n    }\n\n    render() {\n        if (this.state.verifyStatus !== 'failure') {\n            return (<LoadingScreen/>);\n        }\n\n        let serverError = null;\n        if (this.state.serverError) {\n            serverError = (\n                <div className={'form-group has-error'}>\n                    <label className='control-label'>{this.state.serverError}</label>\n                </div>\n            );\n        }\n\n        return (\n            <div>\n                <BackButton/>\n                <div className='col-sm-12'>\n                    <div className='signup-team__container'>\n                        <img\n                            className='signup-team-logo'\n                            src={logoImage}\n                        />\n                        <div className='signup__content'>\n                            <h1>{global.window.mm_config.SiteName}</h1>\n                            <h4 className='color--light'>\n                                <FormattedMessage\n                                    id='web.root.signup_info'\n                                    defaultMessage='All team communication in one place, searchable and accessible anywhere'\n                                />\n                            </h4>\n                            {serverError}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nDoVerifyEmail.defaultProps = {\n    location: {}\n};\n\n\n// WEBPACK FOOTER //\n// ./components/do_verify_email/do_verify_email.jsx"],"sourceRoot":""}