{"version":3,"sources":["webpack:///26.383f3defeaa9393932f6.js","webpack:///./components/authorize.jsx"],"names":["webpackJsonp","2542","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactIntl","_admin_actions","_icon50x","_icon50x2","_form_error","_form_error2","Authorize","_React$Component","props","this","_this","__proto__","call","handleAllow","bind","handleDeny","state","key","get","location","object","isRequired","params","_this2","clientId","URLSearchParams","search","test","getOAuthAppInfo","app","setState","blocker","document","getElementById","parentNode","removeChild","_this3","allowOAuth2","data","redirect","window","href","err","error","message","redirectUri","startsWith","replace","icon","icon_url","createElement","className","src","width","height","alt","FormattedHTMLMessage","id","defaultMessage","values","appName","name","type","onClick","FormattedMessage","Component"],"mappings":"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","file":"26.383f3defeaa9393932f6.js","sourcesContent":["webpackJsonp([26],{\n\n/***/ 2542:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(239);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(238);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(240);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = __webpack_require__(242);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = __webpack_require__(241);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(21);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(13);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(697);\n\nvar _admin_actions = __webpack_require__(738);\n\nvar _icon50x = __webpack_require__(973);\n\nvar _icon50x2 = _interopRequireDefault(_icon50x);\n\nvar _form_error = __webpack_require__(762);\n\nvar _form_error2 = _interopRequireDefault(_form_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar Authorize = function (_React$Component) {\n    (0, _inherits3.default)(Authorize, _React$Component);\n    (0, _createClass3.default)(Authorize, null, [{\n        key: 'propTypes',\n        get: function get() {\n            return {\n                location: _propTypes2.default.object.isRequired,\n                params: _propTypes2.default.object.isRequired\n            };\n        }\n    }]);\n\n    function Authorize(props) {\n        (0, _classCallCheck3.default)(this, Authorize);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Authorize.__proto__ || (0, _getPrototypeOf2.default)(Authorize)).call(this, props));\n\n        _this.handleAllow = _this.handleAllow.bind(_this);\n        _this.handleDeny = _this.handleDeny.bind(_this);\n\n        _this.state = {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(Authorize, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            var clientId = new URLSearchParams(this.props.location.search).get('client_id');\n            if (!/^[a-z0-9]+$/.test(clientId)) {\n                return;\n            }\n\n            (0, _admin_actions.getOAuthAppInfo)(clientId, function (app) {\n                _this2.setState({ app: app });\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            // if we get to this point remove the antiClickjack blocker\n            var blocker = document.getElementById('antiClickjack');\n            if (blocker) {\n                blocker.parentNode.removeChild(blocker);\n            }\n        }\n    }, {\n        key: 'handleAllow',\n        value: function handleAllow() {\n            var _this3 = this;\n\n            var params = new URLSearchParams(this.props.location.search);\n\n            (0, _admin_actions.allowOAuth2)(params, function (data) {\n                if (data.redirect) {\n                    window.location.href = data.redirect;\n                }\n            }, function (err) {\n                _this3.setState({ error: err.message });\n            });\n        }\n    }, {\n        key: 'handleDeny',\n        value: function handleDeny() {\n            var redirectUri = new URLSearchParams(this.props.location.search).get('redirect_uri');\n            if (redirectUri.startsWith('https://') || redirectUri.startsWith('http://')) {\n                window.location.replace(redirectUri + '?error=access_denied');\n                return;\n            }\n\n            window.location.replace('/error');\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var app = this.state.app;\n            if (!app) {\n                return null;\n            }\n\n            var icon = void 0;\n            if (app.icon_url) {\n                icon = app.icon_url;\n            } else {\n                icon = _icon50x2.default;\n            }\n\n            var error = void 0;\n            if (this.state.error) {\n                error = _react2.default.createElement(\n                    'div',\n                    { className: 'prompt__error form-group' },\n                    _react2.default.createElement(_form_error2.default, { error: this.state.error })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'container-fluid' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'prompt' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'prompt__heading' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'prompt__app-icon' },\n                            _react2.default.createElement('img', {\n                                src: icon,\n                                width: '50',\n                                height: '50',\n                                alt: ''\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                                id: 'authorize.title',\n                                defaultMessage: '<strong>{appName}</strong> would like to connect to your <strong>Mattermost</strong> user account',\n                                values: {\n                                    appName: app.name\n                                }\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'authorize.app',\n                            defaultMessage: 'The app <strong>{appName}</strong> would like the ability to access and modify your basic information.',\n                            values: {\n                                appName: app.name\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'h2',\n                        { className: 'prompt__allow' },\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'authorize.access',\n                            defaultMessage: 'Allow <strong>{appName}</strong> access?',\n                            values: {\n                                appName: app.name\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'prompt__buttons' },\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'submit',\n                                className: 'btn btn-link authorize-btn',\n                                onClick: this.handleDeny\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'authorize.deny',\n                                defaultMessage: 'Deny'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'submit',\n                                className: 'btn btn-primary authorize-btn',\n                                onClick: this.handleAllow\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'authorize.allow',\n                                defaultMessage: 'Allow'\n                            })\n                        )\n                    ),\n                    error\n                )\n            );\n        }\n    }]);\n    return Authorize;\n}(_react2.default.Component);\n\nexports.default = Authorize;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 26.383f3defeaa9393932f6.js","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedHTMLMessage, FormattedMessage} from 'react-intl';\n\nimport {allowOAuth2, getOAuthAppInfo} from 'actions/admin_actions.jsx';\nimport icon50 from 'images/icon50x50.png';\nimport FormError from 'components/form_error.jsx';\n\nexport default class Authorize extends React.Component {\n    static get propTypes() {\n        return {\n            location: PropTypes.object.isRequired,\n            params: PropTypes.object.isRequired\n        };\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.handleAllow = this.handleAllow.bind(this);\n        this.handleDeny = this.handleDeny.bind(this);\n\n        this.state = {};\n    }\n\n    componentWillMount() {\n        const clientId = (new URLSearchParams(this.props.location.search)).get('client_id');\n        if (!(/^[a-z0-9]+$/.test(clientId))) {\n            return;\n        }\n\n        getOAuthAppInfo(\n            clientId,\n            (app) => {\n                this.setState({app});\n            }\n        );\n    }\n\n    componentDidMount() {\n        // if we get to this point remove the antiClickjack blocker\n        const blocker = document.getElementById('antiClickjack');\n        if (blocker) {\n            blocker.parentNode.removeChild(blocker);\n        }\n    }\n\n    handleAllow() {\n        const params = new URLSearchParams(this.props.location.search);\n\n        allowOAuth2(params,\n            (data) => {\n                if (data.redirect) {\n                    window.location.href = data.redirect;\n                }\n            },\n            (err) => {\n                this.setState({error: err.message});\n            }\n        );\n    }\n\n    handleDeny() {\n        const redirectUri = (new URLSearchParams(this.props.location.search)).get('redirect_uri');\n        if (redirectUri.startsWith('https://') || redirectUri.startsWith('http://')) {\n            window.location.replace(redirectUri + '?error=access_denied');\n            return;\n        }\n\n        window.location.replace('/error');\n    }\n\n    render() {\n        const app = this.state.app;\n        if (!app) {\n            return null;\n        }\n\n        let icon;\n        if (app.icon_url) {\n            icon = app.icon_url;\n        } else {\n            icon = icon50;\n        }\n\n        let error;\n        if (this.state.error) {\n            error = (\n                <div className='prompt__error form-group'>\n                    <FormError error={this.state.error}/>\n                </div>\n            );\n        }\n\n        return (\n            <div className='container-fluid'>\n                <div className='prompt'>\n                    <div className='prompt__heading'>\n                        <div className='prompt__app-icon'>\n                            <img\n                                src={icon}\n                                width='50'\n                                height='50'\n                                alt=''\n                            />\n                        </div>\n                        <div className='text'>\n                            <FormattedHTMLMessage\n                                id='authorize.title'\n                                defaultMessage='<strong>{appName}</strong> would like to connect to your <strong>Mattermost</strong> user account'\n                                values={{\n                                    appName: app.name\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <p>\n                        <FormattedHTMLMessage\n                            id='authorize.app'\n                            defaultMessage='The app <strong>{appName}</strong> would like the ability to access and modify your basic information.'\n                            values={{\n                                appName: app.name\n                            }}\n                        />\n                    </p>\n                    <h2 className='prompt__allow'>\n                        <FormattedHTMLMessage\n                            id='authorize.access'\n                            defaultMessage='Allow <strong>{appName}</strong> access?'\n                            values={{\n                                appName: app.name\n                            }}\n                        />\n                    </h2>\n                    <div className='prompt__buttons'>\n                        <button\n                            type='submit'\n                            className='btn btn-link authorize-btn'\n                            onClick={this.handleDeny}\n                        >\n                            <FormattedMessage\n                                id='authorize.deny'\n                                defaultMessage='Deny'\n                            />\n                        </button>\n                        <button\n                            type='submit'\n                            className='btn btn-primary authorize-btn'\n                            onClick={this.handleAllow}\n                        >\n                            <FormattedMessage\n                                id='authorize.allow'\n                                defaultMessage='Allow'\n                            />\n                        </button>\n                    </div>\n                    {error}\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/authorize.jsx"],"sourceRoot":""}